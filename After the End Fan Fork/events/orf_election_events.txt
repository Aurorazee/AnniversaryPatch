namespace = orfelection

#ORF Senate Election Candidate Finder
character_event = {
	id = orfelection.1
	title = EVTTITLE_orfelection_1
	desc = EVTDESC_orfelection_1
	is_triggered_only = yes
	
	immediate = {
		if = { #First tries to find an unelected senator to run against
			limit = {
				liege = {
					any_voter = {
						has_character_flag = unelected_senator
						OR = {
							NOT = { has_character_flag = orf_won_election }
							had_character_flag = {
								flag = orf_won_election
								years = 5
							}
						}
						NOR = { 
							has_character_flag = orf_election_running
							has_character_flag = running_for_office_defender
						}
					}
				}
			}
			liege = {
				random_voter = {
					limit = {
						has_character_flag = unelected_senator
						OR = {
							NOT = { has_character_flag = orf_won_election }
							had_character_flag = {
								flag = orf_won_election
								years = 5
							}
						}
						NOR = { 
							has_character_flag = orf_election_running
							has_character_flag = running_for_office_defender
						}
					}
					save_event_target_as = orf_opponent_1
					set_character_flag = orf_do_not_pick
					ROOT = { set_character_flag = orf_opponent_1 }
				}
			}
		}
		if = { #Then a member of a different party than yours
			limit = {
				liege = { 
					any_voter = {
						has_same_orf_party_trait = no
						OR = {
							NOT = { has_character_flag = orf_won_election }
							had_character_flag = {
								flag = orf_won_election
								years = 5
							}
						}
						NOR = {
							has_character_flag = orf_do_not_pick
							has_character_flag = orf_election_running
							has_character_flag = running_for_office_defender
							has_job_title = job_chancellor
							has_job_title = job_marshal
							has_job_title = job_treasurer
							has_job_title = job_spymaster
							has_job_title = job_spiritual
						}
					}
				}
			}
			liege = {
				random_voter = {
					limit = { 
						has_same_orf_party_trait = no
						OR = {
							NOT = { has_character_flag = orf_won_election }
							had_character_flag = {
								flag = orf_won_election
								years = 5
							}
						}
						NOR = { 
							has_character_flag = orf_do_not_pick
							has_character_flag = orf_election_running
							has_character_flag = running_for_office_defender
							has_job_title = job_chancellor
							has_job_title = job_marshal
							has_job_title = job_treasurer
							has_job_title = job_spymaster
							has_job_title = job_spiritual
						}
					}
					save_event_target_as = orf_opponent_2
					set_character_flag = orf_do_not_pick
					ROOT = { set_character_flag = orf_opponent_2 }
				}
			}
		}		
		if = { #Then a member of the same party
			limit = {
				liege = { 
					any_voter = {
						OR = {
							NOT = { has_character_flag = orf_won_election }
							had_character_flag = {
								flag = orf_won_election
								years = 5
							}
						}
						has_same_orf_party_trait = yes
						NOR = { 
							has_character_flag = orf_election_running
							has_character_flag = running_for_office_defender
							has_job_title = job_chancellor
							has_job_title = job_marshal
							has_job_title = job_treasurer
							has_job_title = job_spymaster
							has_job_title = job_spiritual
						}
					}
				}
			}
			liege = {
				random_voter = {
					limit = {
						OR = {
							NOT = { has_character_flag = orf_won_election }
							had_character_flag = {
								flag = orf_won_election
								years = 5
							}
						}
						has_same_orf_party_trait = yes
						NOR = {
							has_character_flag = orf_do_not_pick
							has_character_flag = orf_election_running
							has_character_flag = running_for_office_defender
							has_job_title = job_chancellor
							has_job_title = job_marshal
							has_job_title = job_treasurer
							has_job_title = job_spymaster
							has_job_title = job_spiritual
						}
					}
					save_event_target_as = orf_opponent_3
					set_character_flag = orf_do_not_pick
					ROOT = { set_character_flag = orf_opponent_3 }
				}
			}
		}
	}	
	option = { #Run Against Unelected Senator
		name = EVTOPTA_orfelection_1
		show_portrait = event_target:orf_opponent_candidate_appointee
		trigger = {
			has_character_flag = orf_opponent_1
		}
		event_target:orf_opponent_1 = { save_event_target_as = orf_election_opponent_defender }
		save_event_target_as = orf_election_opponent_attacker
		event_target:orf_election_opponent_defender = {
			set_character_flag = orf_election_running
			set_character_flag = running_for_office_defender
			opinion = {
				name = running_against
				who = event_target:orf_election_opponent_attacker
			}
		}
		event_target:orf_election_opponent_attacker = {
			set_character_flag = orf_election_running
			opinion = {
				name = running_against
				who = event_target:orf_election_opponent_defender
			}
		}
		custom_tooltip = {
			text = liege_may_intervene_TT
			hidden_tooltip = {
				if = { #If the liege has the right to make appointments, then they can intervene to stop the election
					limit = {
						liege = {
							primary_title = { has_law = orf_senate_type_law_0 }
						}
					}
					liege = {
						character_event = { id = orfelection.6 }
					}
				}
				else = {
					event_target:orf_election_opponent_defender = { character_event = { id = orfelection.3 } }
				}
			}
		}
	}
	
	option = { #Run Against Different Party Senator
		name = EVTOPTB_orfelection_1
		show_portrait = event_target:orf_opponent_candidate_party
		trigger = {
			has_character_flag = orf_opponent_2
		}
		event_target:orf_opponent_2 = { save_event_target_as = orf_election_opponent_defender }
		save_event_target_as = orf_election_opponent_attacker
		event_target:orf_election_opponent_defender = {
			set_character_flag = orf_election_running
			set_character_flag = running_for_office_defender
			opinion = {
				name = running_against
				who = event_target:orf_election_opponent_attacker
			}
		}
		event_target:orf_election_opponent_attacker = {
			set_character_flag = orf_election_running
			opinion = {
				name = running_against
				who = event_target:orf_election_opponent_defender
			}
		}
		custom_tooltip = {
			text = liege_may_intervene_TT
			hidden_tooltip = {
				if = { #If the liege has the right to make appointments, then they can intervene to stop the election
					limit = {
						liege = {
							primary_title = { has_law = orf_senate_type_law_0 }
						}
					}
					liege = {
						character_event = { id = orfelection.6 }
					}
				}
				else = {
					event_target:orf_election_opponent_defender = { character_event = { id = orfelection.3 } }
				}
			}
		}
	}
	
	option = { #Run Against Same Party Senator
		name = EVTOPTC_orfelection_1
		show_portrait = event_target:orf_opponent_candidate_outsider
		trigger = {
			has_character_flag = orf_opponent_3
		}
		event_target:orf_opponent_3 = { save_event_target_as = orf_election_opponent_defender }
		ROOT = { save_event_target_as = orf_election_opponent_attacker }
		event_target:orf_election_opponent_defender = {
			set_character_flag = orf_election_running
			set_character_flag = running_for_office_defender
			opinion = {
				name = running_against
				who = event_target:orf_election_opponent_attacker
			}
		}
		event_target:orf_election_opponent_attacker = {
			set_character_flag = orf_election_running
			opinion = {
				name = running_against
				who = event_target:orf_election_opponent_defender
			}
		}
		custom_tooltip = {
			text = liege_may_intervene_TT
			hidden_tooltip = {
				if = { #If the liege has the right to make appointments, then they can intervene to stop the election
					limit = {
						liege = {
							primary_title = { has_law = orf_senate_type_law_0 }
						}
					}
					liege = {
						character_event = { id = orfelection.6 }
					}
				}
				else = {
					event_target:orf_election_opponent_defender = { character_event = { id = orfelection.3 } }
				}
			}
		}
	}

	option = {
		name = EVTOPTD_orfelection_1
		prestige = 25
		clear_orf_election_flags = yes
		ai_chance =	{
			factor = 0
		}
	}
	
	after = {
		clr_character_flag = orf_opponent_1
		clr_character_flag = orf_opponent_2
		clr_character_flag = orf_opponent_3
		event_target:orf_opponent_1 = {
			clr_character_flag = orf_do_not_pick
		}
		event_target:orf_opponent_2 = {
			clr_character_flag = orf_do_not_pick
		}
		event_target:orf_opponent_3 = {
			clr_character_flag = orf_do_not_pick
		}
	}
}

#Liege notified
character_event = {
	id = orfelection.6
	picture = GFX_evt_scandal
	is_triggered_only = yes
	desc = EVTDESC_orfelection_6
	
	option = { #Allow the election to happen
		show_portrait = event_target:orf_election_opponent_defender
		show_portrait = event_target:orf_election_opponent_attacker
		name = EVTOPTA_orfelection_6
		custom_tooltip = {
			text = EVTOPTA_orfelection_6_TT
			hidden_tooltip = {
				event_target:orf_election_opponent_defender = { character_event = { id = orfelection.3 days = 5 } }
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				event_target:orf_election_opponent_attacker = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 0
				event_target:orf_election_opponent_defender = {
					is_friend = ROOT
				}
			}
			modifier = {
				factor = 0
				event_target:orf_election_opponent_defender = {
					trait = party_royalist
				}
				NOT = {
					event_target:orf_election_opponent_attacker = {
						trait = party_royalist
					}
				}
			}
			modifier = {
				factor = 0
				event_target:orf_election_opponent_defender = {
					trait = party_opposition
				}
				NOT = {
					event_target:orf_election_opponent_attacker = {
						trait = party_opposition
					}
				}
			}
			modifier = {
				factor = 0
				event_target:orf_election_opponent_attacker = {
					reverse_opinion = {
						who = ROOT
						value <= -100
					}
				}
				event_target:orf_election_opponent_defender = {
					reverse_opinion = {
						who = ROOT
						value = -25
					}
				}
			}
			modifier = {
				factor = 0
				event_target:orf_election_opponent_attacker = {
					reverse_opinion = {
						who = ROOT
						value <= -50
					}
				}
				event_target:orf_election_opponent_defender = {
					reverse_opinion = {
						who = ROOT
						value = 0
					}
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					is_friend = event_target:orf_election_opponent_defender
					is_lover = event_target:orf_election_opponent_defender
					dynasty = event_target:orf_election_opponent_defender
					likes_better_than = {
						who = event_target:orf_election_opponent_defender
						than = event_target:orf_election_opponent_attacker
					}
				}
			}
			modifier = {
				factor = 0.1
				event_target:orf_election_opponent_attacker = {
					reverse_opinion = {
						who = ROOT
						value <= -25
					}
				}
				event_target:orf_election_opponent_defender = {
					reverse_opinion = {
						who = ROOT
						value = 20
					}
				}
			}
			modifier = {
				factor = 0.1
				event_target:orf_election_opponent_attacker = {
					has_same_orf_party_trait = no
				}
				event_target:orf_election_opponent_defender = {
					has_same_orf_party_trait = yes
				}
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
		}
	}
	option = { #Refuse to assent to the election
		show_portrait = event_target:orf_election_opponent_defender
		show_portrait = event_target:orf_election_opponent_attacker
		name = EVTOPTB_orfelection_6
		ai_chance = {
			factor = 10
		}
		custom_tooltip = {
			text = EVTOPTB_orfelection_6_TT
			hidden_tooltip = {
				event_target:orf_election_opponent_attacker = { character_event = { id = orfelection.7 days = 5 } }
				event_target:orf_election_opponent_defender = { character_event = { id = orfelection.7 days = 5 } }
			}
		}
	}
}

#Ruler refused
character_event = {
	id = orfelection.7
	picture = GFX_evt_emissary
	is_triggered_only = yes
	title = EVTTITLE_orfelection_7
	desc = EVTDESC_orfelection_7
	
	option = {
		name = {
			text = EVTOPTA_orfelection_7_defender
			trigger = {
				has_character_flag = running_for_office_defender
			}
		}
		name = {
			text = EVTOPTA_orfelection_7_attacker
			trigger = {
				has_character_flag = running_for_office_attacker
			}
		}
		clear_orf_election_flags = yes
		event_target:orf_election_opponent_attacker = {
			remove_opinion = {
				name = running_against
				who = event_target:orf_election_opponent_defender
			}
		}
		event_target:orf_election_opponent_defender = {
			remove_opinion = {
				name = running_against
				who = event_target:orf_election_opponent_attacker
			}
		}
		if = {
			limit = {
				event_target:orf_election_opponent_attacker = {
					character = ROOT
				} 
			}
			set_character_flag = running_for_office_cooldown
			opinion = {
				name = opinion_tyrant
				who = FROM
				years = 2
			}
		}
		else = {
			clr_character_flag = orf_won_election
			set_character_flag = orf_won_election
			opinion = {
				name = opinion_grateful
				who = FROM
				years = 5
			}
		}
	}
}

#Incumbent notified
character_event = {
	id = orfelection.3
	picture = GFX_evt_emissary
	is_triggered_only = yes
	desc = EVTDESC_orfelection_3
	
	option = { 
		name = EVTOPTA_orfelection_3
		ai_chance = {
			factor = 90
		}
		custom_tooltip = {
			text = EVTOPTA_orfelection_3_TT
		}
		name = EVTOPTA_orf_election_inform_run_against
		event_target:orf_election_opponent_attacker = { character_event = { id = orfelection.4 days = 5 } }
		event_target:orf_election_opponent_defender = { character_event = { id = orfelection.4 days = 5 } }
	}
	option = { 
		name = EVTOPTB_orfelection_3
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
		}
		custom_tooltip = {
			text = EVTOPTB_orfelection_3_TT
			hidden_tooltip = {
				event_target:orf_election_opponent_attacker = { 
					character_event = { id = orfelection.5 days = 5 }
					reverse_opinion = {
						name = orf_lost_election_to
						who = event_target:orf_election_opponent_defender
					}
				}
				set_character_flag = election_lost_cooldown
			}
		}
	}
}

#Campaign events
character_event = {
	id = orfelection.4
	picture = GFX_evt_stone_church
	is_triggered_only = yes
	desc = EVTDESC_orfelection_4
	
	trigger = {
		has_character_flag = orf_election_running
	}
	
	option = { 
		name = EVTOPTA_orfelection_4
		trigger = {	
			NOT = { has_character_flag = range_campaign }
			NOT = {
				had_character_flag = {
					flag = orf_election_running
					days = 80
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				25 = {
					long_character_event = {id = orfelection.11 days = 25 }	
				}
				25 = {
					long_character_event = {id = orfelection.19 days = 25 }	
				}
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = party_magnate
			}
		}
		long_character_event = {id = orfelection.4 days = 40 }
		set_character_flag = range_campaign
 
	}
	option = {
		name = EVTOPTB_orfelection_4
		trigger = {	
			NOT = { has_character_flag = towns_campaign } 
			NOT = {
				had_character_flag = {
					flag = orf_election_running
					days = 80
				}
			}
		}
		hidden_tooltip = {
			random_list = {
				20 = {
					long_character_event = {id = orfelection.13 days = 25}
				}

				20 = {
					long_character_event = {id = orfelection.15 days = 25}	
				}

				20 = {
					long_character_event = {id = orfelection.17 days = 25}	
				}
			}
		}
		character_event = {id = orfelection.4 days = 40 }
		set_character_flag = towns_campaign
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = party_populist
			}
		}
	}
	option = {
		name = EVTOPTC_orfelection_4
		trigger = { 
			liege = {
				NOR = {
					is_rival = ROOT
					opinion = {
						who = ROOT
						value < 0
					}
				}
			}
			NOT = {
				had_character_flag = {
					flag = orf_election_running
					days = 80
				}
			}
			NOT = { has_character_flag = endorsed_campaign }
		}
		set_character_flag = endorsed_campaign
		liege = { character_event = {id = orfelection.23 days = 25} }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					AND = {
						has_character_flag = orf_election_opponent_attacker
						likes_better_than = {
							who = event_target:orf_election_opponent_defender
							than = event_target:orf_election_opponent_attacker
						}
					}
					AND = {
						has_character_flag = orf_election_opponent_defender
						likes_better_than = {
							who = event_target:orf_election_opponent_attacker
							than = event_target:orf_election_opponent_defender
						}
					}
				}
			}
			modifier = {
				factor = 3
				liege = {
					is_friend = ROOT
				}
			}
		}
	}
	option = {
		name = EVTOPTD_orfelection_4
		trigger = {
			had_character_flag = {
				flag = orf_election_running
				days = 60
			}
			has_character_flag = running_for_office_attacker
		}
		clr_character_flag = towns_campaign
		clr_character_flag = range_campaign
		clr_character_flag = endorsed_campaign
			hidden_tooltip = {
				random_list = {
					50 = { #Attacker won
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_good_11 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_neutral_11 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_bad_11 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelec_great_21 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_good_21 }
						}
						mult_modifier = {
							factor = 0.5
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_bad_21 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_good_13 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_neutral_13 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_bad_13 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_good_15 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_neutral_15 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_bad_15 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_good_19 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_neutral_19 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_bad_19 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_good_17 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_neutral_17 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_attacker = { has_character_flag = orfelect_bad_17 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { trait = party_populist }
							liege = { has_character_modifier = endorsed_populist }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { trait = party_magnate }
							liege = { has_character_modifier = endorsed_magnate }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { trait = party_theocratic }
							liege = { has_character_modifier = endorsed_theocratic }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_attacker = { has_character_flag = endorsed_by_liege }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_attacker = { has_character_modifier = rebellious_range_party }
						}
						mult_modifier = { #So that characters who become incapable during the campaign always lose
							factor = 0
							event_target:orf_election_opponent_attacker = { is_incapable = yes }
						}
						event_target:orf_election_opponent_attacker = { 
							clr_character_flag = orf_won_election
							set_character_flag = orf_won_election					
						}
						event_target:orf_election_opponent_defender = {
							clr_character_flag = orf_won_election
						}
						event_target:orf_election_opponent_attacker = { character_event = { id = orfelection.51 days = 5 } }
						event_target:orf_election_opponent_defender = { character_event = { id = orfelection.52 days = 5 } }
						liege = { character_event = { id = orfelection.56 } }
					}
					55 = { #Defender won
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_good_11 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_neutral_11 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_bad_11 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_defender = { has_character_flag = orfelec_great_21 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_good_21 }
						}
						mult_modifier = {
							factor = 0.5
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_bad_21 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_good_13 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_neutral_13 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_bad_13 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_good_15 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_neutral_15 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_bad_15 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_good_19 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_neutral_19 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_bad_19 }
						}
						mult_modifier = {
							factor = 1.5
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_good_17 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_neutral_17 }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_defender = { has_character_flag = orfelect_bad_17 }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { trait = party_populist }
							liege = { has_character_modifier = endorsed_populist }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { trait = party_magnate }
							liege = { has_character_modifier = endorsed_magnate }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { trait = party_theocratic }
							liege = { has_character_modifier = endorsed_theocratic }
						}
						mult_modifier = {
							factor = 1.25
							event_target:orf_election_opponent_defender = { has_character_flag = endorsed_by_liege }
						}
						mult_modifier = {
							factor = 0.75
							event_target:orf_election_opponent_defender = { has_character_modifier = rebellious_range_party }
						}
						mult_modifier = { #So that characters who become incapable during the campaign always lose
							factor = 0
							event_target:orf_election_opponent_defender = { is_incapable = yes }
						}
						event_target:orf_election_opponent_defender = { 
							clr_character_flag = orf_won_election
							set_character_flag = orf_won_election
						}
						event_target:orf_election_opponent_attacker = {
							clr_character_flag = orf_won_election
						}
						event_target:orf_election_opponent_attacker = { character_event = { id = orfelection.53 days = 5 } }
						event_target:orf_election_opponent_defender = { character_event = { id = orfelection.54 days = 5 } }
						liege = { character_event = { id = orfelection.57 } }
					}
				}
			}
		}
	option = {
		name = EVTOPTE_orfelection_4
		trigger = {
			had_character_flag = {
				flag = orf_election_running
				days = 60
			}
			has_character_flag = running_for_office_defender
		}
		clr_character_flag = towns_campaign
		clr_character_flag = range_campaign
		clr_character_flag = endorsed_campaign
	}
}

#Incumbent resigns
character_event = {
	id = orfelection.5
	picture = GFX_evt_council
	is_triggered_only = yes
	desc = EVTDESC_orfelection_5
	
	option = { 
		name = EVTOPTA_orfelection_5
		liege = {
			character_event = { id = orfelection.55 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_12 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_12 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_12 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_11 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_11 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_11 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_10 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_10 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_10 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_9 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_9 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_9 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_8 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_8 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_8 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_7 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_7 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_7 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_6 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_6 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_6 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_5 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_5 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_5 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_4 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_4 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_4 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_4 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_4 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_4 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_3 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_3 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_3 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_2 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_2 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_2 }
		}		
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_1 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_1 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_1 }
		}	
		event_target:orf_election_opponent_attacker = { 
			clear_orf_election_flags = yes
		}
		event_target:orf_election_opponent_defender = { 
			clear_orf_election_flags = yes
		}
		event_target:orf_election_opponent_attacker = {
			remove_opinion = {
				name = running_against
				who = event_target:orf_election_opponent_defender
			}
		}
		event_target:orf_election_opponent_defender = {
			remove_opinion = {
				name = running_against
				who = event_target:orf_election_opponent_attacker
			}
		}
	}
}

#Attacker won - Attacker
character_event = {
	id = orfelection.51
	picture = GFX_evt_council
	is_triggered_only = yes
	title = EVTTITLE_orfelection_51
	desc = EVTDESC_orfelection_51
	
	option = { 
		name = EVTOPTA_orfelection_51
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_12 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_12 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_12 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_11 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_11 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_11 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_10 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_10 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_10 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_9 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_9 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_9 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_8 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_8 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_8 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_7 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_7 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_7 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_6 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_6 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_6 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_5 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_5 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_5 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_4 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_4 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_4 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_4 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_4 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_4 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_3 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_3 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_3 }
		}
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_2 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_2 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_2 }
		}		
		if = {
			limit = { event_target:orf_election_opponent_defender = { has_minor_title = title_senator_1 } }
			event_target:orf_election_opponent_defender = { remove_title = title_senator_1 }
			event_target:orf_election_opponent_attacker = { give_minor_title = title_senator_1 }
		}	
		event_target:orf_election_opponent_attacker = { 
			clear_orf_election_flags = yes
		}
		event_target:orf_election_opponent_defender = { 
			clear_orf_election_flags = yes
			opinion = {
				name = orf_lost_election_to
				who = event_target:orf_election_opponent_attacker
			}
		}
	}
}

#Attacker won - Defender
character_event = {
	id = orfelection.52
	picture = GFX_evt_bad_news
	is_triggered_only = yes
	title = EVTTITLE_orfelection_52
	desc = EVTDESC_orfelection_52
	
	option = { 
		name = EVTOPTA_orfelection_52
		clear_orf_election_flags = yes
		custom_tooltip = {
			text = election_lost_cooldown_event_TT
			hidden_tooltip = {
				set_character_flag = election_lost_cooldown
			}
		}
	}
}

#Defender won - Attacker
character_event = {
	id = orfelection.53
	picture = GFX_evt_bad_news
	is_triggered_only = yes
	title = EVTTITLE_orfelection_53
	desc = EVTDESC_orfelection_53
	
	option = { 
		name = EVTOPTA_orfelection_53
		clear_orf_election_flags = yes
		custom_tooltip = {
			text = election_lost_cooldown_event_TT
			hidden_tooltip = {
				set_character_flag = election_lost_cooldown
			}
		}
	}
}

#Defender won - Defender
character_event = {
	id = orfelection.54
	picture = GFX_evt_council
	is_triggered_only = yes
	title = EVTTITLE_orfelection_54
	desc = EVTDESC_orfelection_54
	
	option = { 
		name = EVTOPTA_orfelection_54
		clear_orf_election_flags = yes
	}
}

#Informs liege incumbent has resigned
character_event = {
	id = orfelection.55
	desc = EVTDESC_orfelection_55
	is_triggered_only = yes
	
	option = {
		show_portrait = event_target:orf_election_opponent_defender
		show_portrait = event_target:orf_election_opponent_attacker
		name = EVTOPTA_orfelection_55
	}
}

#Informs liege attacker won
character_event = {
	id = orfelection.56
	desc = EVTDESC_orfelection_56
	is_triggered_only = yes
	
	option = {
		show_portrait = event_target:orf_election_opponent_defender
		show_portrait = event_target:orf_election_opponent_attacker
		name = EVTOPTA_orfelection_56
	}
}

#Informs liege defender won
character_event = {
	id = orfelection.57
	desc = EVTDESC_orfelection_57
	is_triggered_only = yes
	
	option = {
		show_portrait = event_target:orf_election_opponent_defender
		show_portrait = event_target:orf_election_opponent_attacker
		name = EVTOPTA_orfelection_57
	}
}

#Clears orf_won_election if no longer a voter
character_event = {
	id = orfelection.58
	hide_window = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_character_flag = orf_won_election
		is_voter = no
	}
	
	immediate = {
		clr_character_flag = orf_won_election
	}
}

#Clears unelected_senator if no longer a voter
character_event = {
	id = orfelection.59
	hide_window = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_character_flag = unelected_senator
		is_voter = no
	}
	
	immediate = {
		clr_character_flag = unelected_senator
	}
}

#Clears unelected_senator if elected
character_event = {
	id = orfelection.60
	hide_window = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_character_flag = unelected_senator
		has_character_flag = orf_won_election
		is_voter = no
	}
	
	immediate = {
		clr_character_flag = unelected_senator
	}
}

#Defender dies during election
character_event = {
	id = orfelection.100
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_character_flag = running_for_office_defender
	}
	immediate = {
		liege = {
			any_courtier_or_vassal = {
				limit = { has_character_flag = running_for_office_attacker }
				character_event = { id = orfelection.101 }
				if = {
					limit = { ROOT = { has_minor_title = title_senator_12 } }
					ROOT = { remove_title = title_senator_12 }
					give_minor_title = title_senator_12
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_11 } }
					ROOT = { remove_title = title_senator_11 }
					give_minor_title = title_senator_11
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_10 } }
					ROOT = { remove_title = title_senator_10 }
					give_minor_title = title_senator_10
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_9 } }
					ROOT = { remove_title = title_senator_9 }
					give_minor_title = title_senator_9
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_8 } }
					ROOT = { remove_title = title_senator_8 }
					give_minor_title = title_senator_8
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_7 } }
					ROOT = { remove_title = title_senator_7 }
					give_minor_title = title_senator_7
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_6 } }
					ROOT = { remove_title = title_senator_6 }
					give_minor_title = title_senator_6
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_5 } }
					ROOT = { remove_title = title_senator_5 }
					give_minor_title = title_senator_5
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_4 } }
					ROOT = { remove_title = title_senator_4 }
					give_minor_title = title_senator_4
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_4 } }
					ROOT = { remove_title = title_senator_4 }
					give_minor_title = title_senator_4
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_3 } }
					ROOT = { remove_title = title_senator_3 }
					give_minor_title = title_senator_3
				}
				if = {
					limit = { ROOT = { has_minor_title = title_senator_2 } }
					ROOT = { remove_title = title_senator_2 }
					give_minor_title = title_senator_2
				}		
				if = {
					limit = { ROOT = { has_minor_title = title_senator_1 } }
					ROOT = { remove_title = title_senator_1 }
					give_minor_title = title_senator_1 
				}
			}
		}
	}
}

#Attacker informed of Defender death
character_event = {
	id = orfelection.101
	picture = GFX_evt_bad_news
	is_triggered_only = yes
	desc = EVTDESC_orfelection_101
	option = {
		show_portrait = FROM
		name = EVTOPTA_orfelection_101
		clear_orf_election_flags = yes
		hidden_tooltip = {
			liege = {
				character_event = { id = orfelection.106 }
			}
		}
	}
}

#Attacker dies during election
character_event = {
	id = orfelection.102
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_character_flag = running_for_office_attacker
	}
	immediate = {
		liege = {
			any_courtier_or_vassal = {
				limit = { has_character_flag = running_for_office_defender }
				character_event = { id = orfelection.103 }
			}
		}
	}
}

#Defender informed of Attacker death
character_event = {
	id = orfelection.103
	picture = GFX_evt_bad_news
	is_triggered_only = yes
	desc = EVTDESC_orfelection_103
	
	option = {
		show_portrait = FROM
		name = EVTOPTA_orfelection_103
		clear_orf_election_flags = yes
		hidden_tooltip = {
			liege = {
				character_event = { id = orfelection.107 }
			}
		}
	}
}

#Event for edge cases
character_event = {
	id = orfelection.104
	desc = EVTDESC_orfelection_104
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_character_flag = running_for_office_attacker
		OR = {
			independent = yes
			is_voter = yes
			any_character = {
				has_character_flag = running_for_office_defender
				has_opinion_modifier = {
					who = ROOT
					name = running_against
				}
				OR = {
					is_voter = no
					NOT = {
						ROOT = {
							liege = {
								is_liege_of = PREVPREV
							}
						}
					}
				}
			}
		}
	}
	
	immediate = {
		any_character = {
			limit = {
				has_character_flag = running_for_office_defender
				has_opinion_modifier = {
					who = ROOT
					name = running_against
				}
			}
			save_event_target_as = orf_election_opponent_defender
		}
		if = {
			limit = {
				independent = yes
			}
			clr_character_flag = election_lost_cooldown
			clr_character_flag = running_for_office_cooldown
			clr_character_flag = orf_won_election
		}
		save_event_target_as = orf_election_opponent_attacker
	}
	
	option = {
		show_portrait = event_target:orf_election_opponent_defender
		name = EVTOPTA_orfelection_104
		clear_orf_election_flags = yes
		event_target:orf_election_opponent_defender = {
			character_event = { id = orfelection.105 }
			hidden_tooltip = {
				clear_orf_election_flags = yes
			}
		}
	}
}

#Informs old defender
character_event = {
	id = orfelection.105
	desc = EVTDESC_orfelection_105
	is_triggered_only = yes
	
	option = {
		show_portrait = FROM
		name = EVTOPTA_orfelection_105
	}
}

#Informs liege of defender's death
character_event = {
	id = orfelection.106
	desc = EVTDESC_orfelection_106
	is_triggered_only = yes
	
	option = {
		show_portrait = FROM
		show_portrait = FROMFROM
		name = EVTOPTA_orfelection_106
	}
}

#Informs liege of attacker's death
character_event = {
	id = orfelection.107
	desc = EVTDESC_orfelection_107
	is_triggered_only = yes
	
	option = {
		show_portrait = FROM
		show_portrait = FROMFROM
		name = EVTOPTA_orfelection_107
	}
}

#Clears ORF election flags if independent
character_event = {
	id = orfelection.108
	hide_window = yes
	mean_time_to_happen = {
		days =  1
	}
	
	trigger = {
		independent = yes
		OR = {
			has_character_flag = election_lost_cooldown
			has_character_flag = running_for_office_cooldown
			has_character_flag = orf_won_election
		}
	}
	
	immediate = {
		clr_character_flag = election_lost_cooldown
		clr_character_flag = running_for_office_cooldown
		clr_character_flag = orf_won_election
	}
}

#TODO AI_will_do, and connect it to the rest of the chain
long_character_event = {#local speech
	id = orfelection.11
	desc = EVTDESC_orfelec_problem_minor_meeting
	picture = GFX_evt_feast
	portrait = none
	is_triggered_only = yes#i..think? maybe we will do a tombola, maybe we will have a MTTH on election events
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		long_character_event = {id = orfelection.12 days = 7}	
	}
	option = {
		name = EVTOPTA_orfelec_problem_minor_meeting
		custom_tooltip = {
			text = ORFELECCUSTOM
			random_list = {
				10 = {
					set_character_flag = orfelect_good_11
					change_variable = {
						which = orf_candidate_score
						value = 1
					}
					mult_modifier = {
						factor = 0
						diplomacy == 0
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 5
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 10
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 15
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 20
					}
					mult_modifier = {
						factor = 0
						learning == 0
					}
					mult_modifier = {
						factor = 1.5
						learning = 5
					}
					mult_modifier = {
						factor = 1.5
						learning = 10
					}
					mult_modifier = {
						factor = 1.5
						learning = 15
					}
					mult_modifier = {
						factor = 1.5
						learning = 20
					}
					mult_modifier = {
						factor = 2
						OR = {
							trait = socializer
							trait = scholar
						}
					}
				}
				20 = {#neutral
					set_character_flag = orfelect_neutral_11
				}
				40 = {#bad
					set_character_flag = orfelect_bad_11
					mult_modifier = {
						factor = 1.5
						diplomacy == 0
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 5
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 10
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 15
					}
					mult_modifier = {
						factor = 0
						diplomacy = 20
					}
					mult_modifier = {
						factor = 0.75
						learning == 0
					}
					mult_modifier = {
						factor = 0.75
						learning = 5
					}
					mult_modifier = {
						factor = 0.75
						learning = 10
					}
					mult_modifier = {
						factor = 0.75
						learning = 15
					}
					mult_modifier = {
						factor = 0
						learning = 20
					}
					mult_modifier = {
						factor = 0
						OR = {
							trait = socializer
							trait = scholar
						}
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTB_orfelec_problem_minor_meeting
		prestige = -100
		custom_tooltip = {
			text = ORFELECCUSTOM
			random_list = {
				20 = {#good
					set_character_flag = orfelect_good_11
					mult_modifier = {
						factor = 0
						diplomacy == 0
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 5
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 10
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 15
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 20
					}
					mult_modifier = {
						factor = 0
						prestige < 0
					}
					mult_modifier = {
						factor = 1.5
						prestige = 500
					}
					mult_modifier = {
						factor = 1.5
						prestige = 1000
					}
					mult_modifier = {
						factor = 1.5
						prestige = 2000
					}
					mult_modifier = {
						factor = 1.5
						prestige = 4000
					}
					mult_modifier = {
						factor = 2
						OR = {
							trait = socializer
						}
					}
				}
				20 = {#neutral
					set_character_flag = orfelect_neutral_11
				}
				40 = {#bad
					set_character_flag = orfelect_bad_11
					mult_modifier = {
						factor = 1.5
						diplomacy == 0
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 5
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 10
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 15
					}
					mult_modifier = {
						factor = 0
						diplomacy = 20
					}
					mult_modifier = {
						factor = 0.75
						learning == 0
					}
					mult_modifier = {
						factor = 0.75
						learning = 5
					}
					mult_modifier = {
						factor = 0.75
						learning = 10
					}
					mult_modifier = {
						factor = 0.75
						learning = 15
					}
					mult_modifier = {
						factor = 0
						learning = 20
					}
					mult_modifier = {
						factor = 0
						OR = {
							trait = socializer
						}
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTC_orfelec_problem_minor_meeting
		custom_tooltip = {
			text = ORFELECCUSTOM
			random_list = {
				10 = {
					set_character_flag = orfelect_good_11
					mult_modifier = {
						factor = 0
						diplomacy == 0
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 5
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 10
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 15
					}
					mult_modifier = {
						factor = 1.5
						diplomacy = 20
					}
					mult_modifier = {
						factor = 0
						intrigue == 0
					}
					mult_modifier = {
						factor = 1.5
						intrigue = 5
					}
					mult_modifier = {
						factor = 1.5
						intrigue = 10
					}
					mult_modifier = {
						factor = 1.5
						intrigue = 15
					}
					mult_modifier = {
						factor = 1.5
						intrigue = 20
					}
					mult_modifier = {
						factor = 2
						OR = {
							trait = socializer
							trait = schemer
						}
					}
				}
				20 = {#neutral
					set_character_flag = orfelect_neutral_11
				}
				40 = {#bad
					set_character_flag = orfelect_bad_11
					mult_modifier = {
						factor = 1.5
						diplomacy == 0
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 5
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 10
					}
					mult_modifier = {
						factor = 0.75
						diplomacy = 15
					}
					mult_modifier = {
						factor = 0
						diplomacy = 20
					}
					mult_modifier = {
						factor = 0.75
						intrigue == 0
					}
					mult_modifier = {
						factor = 0.75
						intrigue = 5
					}
					mult_modifier = {
						factor = 0.75
						intrigue = 10
					}
					mult_modifier = {
						factor = 0.75
						intrigue = 15
					}
					mult_modifier = {
						factor = 0
						intrigue = 20
					}
					mult_modifier = {
						factor = 0
						OR = {
							trait = socializer
							trait = schemer
						}
					}
				}
			}
		}
	}
}

long_character_event = {#resolved
	id = orfelection.12
	is_triggered_only = yes
	portrait = none
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	desc = {
		trigger = { has_character_flag = orfelect_good_11}
		text = EVTDESC_orfelec_resolve_good_minor_meeting
		picture = GFX_evt_feast
	}
	desc = {
		trigger = { has_character_flag = orfelect_neutral_11}
		text = EVTDESC_orfelec_resolve_neutral_minor_meeting
		picture = GFX_evt_brothel
	}
	desc = {
		trigger = { has_character_flag = orfelect_bad_11}
		text = EVTDESC_orfelec_resolve_bad_minor_meeting
		picture = GFX_evt_scandal
	}

	option = {
		trigger = { has_character_flag = orfelect_good_11}
		name = EVTOPT_orfelec_resolve_good_minor_meeting
	}
	option = {
		trigger = { has_character_flag = orfelect_neutral_11}
		name = EVTOPT_orfelec_resolve_neutral_minor_meeting
	}
	option = {
		trigger = { has_character_flag = orfelect_bad_11}
		name = EVTOPT_orfelec_resolve_bad_minor_meeting
	}
}

long_character_event = {#Merchants arrive
	id = orfelection.13
	picture = GFX_evt_carriage
	desc = EVTDESC_orfelec_problem_merchants
	portrait = none
	is_triggered_only = yes#i..think? maybe we will do a tombola, maybe we will have a MTTH on election events
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		long_character_event = {id = orfelection.14 days = 7}
	}
	option = {
		name = EVTOPTA_orfelec_problem_merchants
		custom_tooltip = {
			random_list = {
				10 = {#good
					set_character_flag = orfelect_good_13
					mult_modifier = {
						factor = 0
						stewardship == 0
					}
					mult_modifier = {
						factor = 2
						stewardship = 5
					}
					mult_modifier = {
						factor = 2
						stewardship = 10
					}
					mult_modifier = {
						factor = 2
						stewardship = 15
					}
					mult_modifier = {
						factor = 2
						stewardship = 20
					}
					mult_modifier = {
						factor = 2
						trait = architect #kinda odd, but that's the business focus lifestyle trait
					}
				}
				20 = {#neutral
					set_character_flag = orfelect_neutral_13
				}
				40 = {#bad
					set_character_flag = orfelect_bad_13
					mult_modifier = {
						factor = 2
						stewardship == 0
					}
					mult_modifier = {
						factor = 0.5
						stewardship = 5
					}
					mult_modifier = {
						factor = 0.5
						stewardship = 10
					}
					mult_modifier = {
						factor = 0.5
						stewardship = 15
					}
					mult_modifier = {
						factor = 0
						OR = {
							stewardship = 20
							trait = architect
						}
					}
				}
			}
			text = ORFELECCUSTOM
		}
	}
	option = {
		name = EVTOPTB_orfelec_problem_merchants
		wealth = -50
		prestige = -50
		custom_tooltip = {
			random_list = {
				15 = {#good
					set_character_flag = orfelect_good_13
					mult_modifier = {
						factor = 2
						trait = groomed
					}
					mult_modifier = {
						factor = 2
						trait = socializer
					}
					mult_modifier = {
						factor = 1.3
						trait = gregarious
					}
					mult_modifier = {
						factor = 1.3
						trait = administrator
					}
					mult_modifier = {
						factor = 0.7
						trait = shy
					}
					mult_modifier = {
						factor = 0.8
						trait = cruel
					}
					mult_modifier = {
						factor = 0
						trait = uncouth
					}
				}
				20 = {#neutral
					set_character_flag = orfelect_neutral_13
				}
				30 = {#bad
					set_character_flag = orfelect_bad_13
					mult_modifier = {
						factor = 0
						trait = groomed
					}
					mult_modifier = {
						factor = 0
						trait = socializer
					}
					mult_modifier = {
						factor = 0.6
						trait = gregarious
					}
					mult_modifier = {
						factor = 0.7
						trait = administrator
					}
					mult_modifier = {
						factor = 1.3
						trait = shy
					}
					mult_modifier = {
						factor = 1.2
						trait = cruel
					}
					mult_modifier = {
						factor = 2
						trait = uncouth
					}
				}
			}
			text = ORFELECCUSTOM
		}
	}
	option = {
		name = EVTOPTC_orfelec_problem_merchants
		custom_tooltip = {
			random_list = {
				20 = {#good
					set_character_flag = orfelect_good_13
				}
				30 = {#neutral
					set_character_flag = orfelect_neutral_13
				}
				20 = {#bad
					set_character_flag = orfelect_bad_13
				}
			}
			text = ORFELECCUSTOM
		}		
	}
}

long_character_event = {#resolved
	id = orfelection.14
	desc = {
		trigger = { has_character_flag = orfelect_good_13}
		text = EVTDESC_orfelec_resolve_good_merchants
		picture = GFX_evt_market
	}
	desc = {
		trigger = { has_character_flag = orfelect_neutral_13}
		text = EVTDESC_orfelec_resolve_neutral_merchants
		picture = GFX_evt_merchant_caravan
	}
	desc = {
		trigger = { has_character_flag = orfelect_bad_13}
		text = EVTDESC_orfelec_resolve_bad_merchants
		picture = GFX_evt_market_hf
	}
	only_playable = yes
	capable_only = yes
	is_triggered_only = yes
	portrait = none
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	option = {
		trigger = { has_character_flag = orfelect_good_13}
		name = EVTOPT_orfelec_resolve_good_merchants
	}
	option = {
		name = EVTOPT_orfelec_resolve_neutral_merchants
		trigger = { has_character_flag = orfelect_neutral_13}
	}
	option = {
		name = EVTOPT_orfelec_resolve_bad_merchants
		trigger = { has_character_flag = orfelect_bad_13}
	}
}

long_character_event = {#a problem occurs
	id = orfelection.15
	desc = EVTDESC_orfelec_problem_rangers
	picture = GFX_evt_family_feud_republic
	only_playable = yes
	capable_only = yes
	is_triggered_only = yes#i..think? maybe we will do a tombola, maybe we will have a MTTH on election events
	portrait = none
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		long_character_event = {id = orfelection.16 days = 7}
	}
	option = {#skill one
		name = EVTOPTA_orfelec_problem_rangers
		custom_tooltip = {
			text = ORFELECCUSTOM
			random_list = {
				10 = {#good
					set_character_flag = orfelect_good_15
					mult_modifier = {
						factor = 0
						diplomacy == 0
					}
					mult_modifier = {
						factor = 2
						diplomacy = 5
					}
					mult_modifier = {
						factor = 2
						diplomacy = 10
					}
					mult_modifier = {
						factor = 2
						diplomacy = 15
					}
					mult_modifier = {
						factor = 2
						diplomacy = 20
					}
					mult_modifier = {
						factor = 2
						trait = socializer
					}
				}
				20 = {#neutral
					set_character_flag = orfelect_neutral_15
				}
				40 = {#bad
					set_character_flag = orfelect_bad_15
					mult_modifier = {
						factor = 2
						diplomacy == 0
					}
					mult_modifier = {
						factor = 0.5
						diplomacy = 5
					}
					mult_modifier = {
						factor = 0.5
						diplomacy = 10
					}
					mult_modifier = {
						factor = 0.5
						diplomacy = 15
					}
					mult_modifier = {
						factor = 0
						OR = {
							diplomacy = 20
							trait = socializer
						}
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTB_orfelec_problem_rangers
		custom_tooltip = {
			text = ORFELECCUSTOM
			random_list = {
				10 = {#good
					set_character_flag = orfelect_good_15
					mult_modifier = {
						factor = 0
						martial == 0
					}
					mult_modifier = {
						factor = 2
						martial = 5
					}
					mult_modifier = {
						factor = 2
						martial = 10
					}
					mult_modifier = {
						factor = 2
						martial = 15
					}
					mult_modifier = {
						factor = 2
						martial = 20
					}
					mult_modifier = {
						factor = 2
						trait = strategist
					}
				}
				20 = {#neutral
					set_character_flag = orfelect_neutral_15
				}
				40 = {#bad
					set_character_flag = orfelect_bad_15
					mult_modifier = {
						factor = 2
						martial == 0
					}
					mult_modifier = {
						factor = 0.5
						martial = 5
					}
					mult_modifier = {
						factor = 0.5
						martial = 10
					}
					mult_modifier = {
						factor = 0.5
						martial = 15
					}
					mult_modifier = {
						factor = 0
						OR = {
							martial = 20
							trait = strategist
						}
					}

				}
			}
		}
	}
	option = {
		name = EVTOPTC_orfelec_problem_rangers
		custom_tooltip = {
			text = ORFELECCUSTOM
			random_list = {
				10 = {#good
					set_character_flag = orfelect_good_15
					mult_modifier = {
						factor = 0
						learning == 0
					}
					mult_modifier = {
						factor = 2
						learning = 5
					}
					mult_modifier = {
						factor = 2
						learning = 10
					}
					mult_modifier = {
						factor = 2
						learning = 15
					}
					mult_modifier = {
						factor = 2
						learning = 20
					}
					mult_modifier = {
						factor = 2
						trait = theologian
					}
				}
				20 = {#neutral
					set_character_flag = orfelect_neutral_15
				}
				40 = {#bad
					set_character_flag = orfelect_bad_15
					mult_modifier = {
						factor = 2
						learning == 0
					}
					mult_modifier = {
						factor = 0.5
						learning = 5
					}
					mult_modifier = {
						factor = 0.5
						learning = 10
					}
					mult_modifier = {
						factor = 0.5
						learning = 15
					}
					mult_modifier = {
						factor = 0
						OR = {
							learning = 20
							trait = theologian
						}
					}
				}
			}
		}
	}
}

long_character_event = {#resolved
	id = orfelection.16
	desc = {
		text = EVTDESC_orfelec_resolve_good_rangers
		trigger = { has_character_flag = orfelect_good_15}
		picture = GFX_evt_outside_tavern_hf
	}
	desc = {
		trigger = { has_character_flag = orfelect_neutral_15}
		text = EVTDESC_orfelec_resolve_neutral_rangers
		picture = GFX_evt_peasants
	}
	desc = {
		trigger = { has_character_flag = orfelect_bad_15}
		text = EVTDESC_orfelec_resolve_bad_rangers
		picture = GFX_evt_drunk
	}
	only_playable = yes
	capable_only = yes
	is_triggered_only = yes
	portrait = none
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	option = {
		name = EVTOPT_orfelec_resolve_good_rangers
		trigger = { has_character_flag = orfelect_good_15}
	}
	option = {
		trigger = { has_character_flag = orfelect_neutral_15}
		name = EVTOPT_orfelec_resolve_neutral_rangers
	}
	option = {
		name = EVTOPT_orfelec_resolve_bad_rangers
		trigger = { has_character_flag = orfelect_bad_15}
	}
}

#TODO AI_will_do, and connect it to the rest of the chain
long_character_event = {
	id = orfelection.17
	desc = EVTDESC_orfelec_problem_destitute_ranger
	picture = GFX_evt_family
	is_triggered_only = yes#i..think? maybe we will do a tombola, maybe we will have a MTTH on election events
	portrait = none
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		long_character_event = {id = orfelection.18 days = 7}	
	}
	option = {
		name = EVTOPTA_orfelec_problem_destitute_rangers_help
		set_character_flag = destitute_ranger_charity
		trigger = { 
			scaled_wealth = { value = 0.25 } 
		}
		scaled_wealth = { value = -0.25 }
	}
	option = {
		name = EVTOPTA_orfelec_problem_destitute_rangers_encourage
		set_character_flag = destitute_ranger_encourage_them
		
	}
	option = {
		name = EVTOPTA_orfelec_problem_destitute_rangers_organize
		set_character_flag = destitute_ranger_organize_help
		prestige = -100
	}
}

long_character_event = {#resolved
	id = orfelection.18
	desc = {
		trigger = { has_character_flag = orfelect_good_17 }
		text = EVTDESC_orfelec_problem_destitute_ranger_resolve_good
		picture = GFX_evt_idyllic_fishing_wol
	}
	desc = {
		trigger = { has_character_flag = orfelect_neutral_17 }
		text = EVTDESC_orfelec_problem_destitute_ranger_resolve_neutral
		picture = GFX_evt_sleeping_town_hf
	}
	desc = {
		trigger = { 
			has_character_flag = orfelect_bad_17
			NOT = { has_character_flag = destitute_ranger_encourage_them }
		}
		text = EVTDESC_orfelec_problem_destitute_ranger_resolve_bad
		picture = GFX_evt_culture_change
	}
	desc = {
		trigger = { 
			has_character_flag = orfelect_bad_17
			has_character_flag = destitute_ranger_encourage_them
		}
		picture = GFX_evt_culture_change
		text = EVTDESC_orfelec_problem_destitute_ranger_resolve_bad_worse
	}
	is_triggered_only = yes
	portrait = none
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		random_list = {
			40 = {
				mult_modifier = {
					factor = 0.25
					has_character_flag = destitute_ranger_encourage_them
				}
				mult_modifier = {
					factor = 1.75
					has_character_flag = destitute_ranger_encourage_them
					trait = just
				}
				mult_modifier = {
					factor = 1.5
					has_character_flag = destitute_ranger_organize_help
					trait = charitable
				}
	
				mult_modifier = {
					factor = 1.5
					has_character_flag = destitute_ranger_charity
					trait = charitable
				}
				mult_modifier = {
					factor = 1.5
					has_character_flag = destitute_ranger_organize_help
					trait = socializer
				}
				mult_modifier = {
					factor = 1.25
					has_character_flag = destitute_ranger_charity
				}
				mult_modifier = {
					factor = 1.25
					has_character_flag = destitute_ranger_organize_help
				}
				set_character_flag = orfelect_good_17
			}
			20 = {
				mult_modifier = {
					factor = 0.5
					has_character_flag = destitute_ranger_encourage_them
				}
				mult_modifier = {
					factor = 1.25
					has_character_flag = destitute_ranger_organize_help
					trait = charitable
				}
				mult_modifier = {
					factor = 2.5
					has_character_flag = destitute_ranger_encourage_them
					trait = just
				}
				mult_modifier = {
					factor = 1.1
					has_character_flag = destitute_ranger_charity
				}
				mult_modifier = {
					factor = 1.1
					has_character_flag = destitute_ranger_organize_help
				}
				set_character_flag = orfelect_neutral_17
			}
			30 = {
				mult_modifier = {
					factor = 2.0
					has_character_flag = destitute_ranger_encourage_them
				}
				mult_modifier = {
					factor = 0.75
					has_character_flag = destitute_ranger_organize_help
					trait = charitable
				}
				mult_modifier = {
					factor = 0.75
					has_character_flag = destitute_ranger_encourage_them
					trait = just
				}
				mult_modifier = {
					factor = 0.85
					has_character_flag = destitute_ranger_charity
				}
				mult_modifier = {
					factor = 0.85
					has_character_flag = destitute_ranger_organize_help
				}
				set_character_flag = orfelect_bad_17
			}
		}
	}
	
	option = {
		trigger = { has_character_flag = orfelect_good_17}
		name = EVTOPT_orfelec_resolve_destitute_ranger_good
		clr_character_flag = destitute_ranger_organize_help
		clr_character_flag = destitute_ranger_encourage_them
		clr_character_flag = destitute_ranger_charity
	}
	option = {
		trigger = { has_character_flag = orfelect_neutral_17}
		name = EVTOPT_orfelec_resolve_destitute_ranger_neutral
		clr_character_flag = destitute_ranger_organize_help
		clr_character_flag = destitute_ranger_encourage_them
		clr_character_flag = destitute_ranger_charity
	}
	option = {
		trigger = { 
			has_character_flag = orfelect_bad_17
			NOT = { has_character_flag = destitute_ranger_encourage_them }
		}
		name = EVTOPT_orfelec_resolve_destitute_ranger_bad
		clr_character_flag = destitute_ranger_organize_help
		clr_character_flag = destitute_ranger_encourage_them
		clr_character_flag = destitute_ranger_charity
	}
	option = {
		trigger = { 
			has_character_flag = orfelect_bad_17
			has_character_flag = destitute_ranger_encourage_them
		}
		name = EVTOPT_orfelec_resolve_destitute_ranger_bad_worse
		clr_character_flag = destitute_ranger_organize_help
		clr_character_flag = destitute_ranger_encourage_them
		clr_character_flag = destitute_ranger_charity
	}
}

#TODO AI_will_do, and connect it to the rest of the chain
long_character_event = {
	id = orfelection.19
	desc = EVTDESC_orfelec_problem_range_squatters
	picture = GFX_evt_construction_site
	only_playable = yes
	capable_only = yes
	is_triggered_only = yes#i..think? maybe we will do a tombola, maybe we will have a MTTH on election events
	portrait = none
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		long_character_event = {id = orfelection.20 days = 7}	
	}
	option = {
		name = EVTOPTA_orfelec_problem_range_squatters_cash_help
		set_character_flag = range_squatter_charity
		trigger = { 
			scaled_wealth = { value = 0.25 } 
		}
		scaled_wealth = { value = -0.25 }
	}
	option = {
		name = EVTOPTA_orfelec_problem_range_squatters_convince_unsafe
		set_character_flag = range_squatter_convince
		prestige = -100
	}
	option = {
		name = EVTOPTA_orfelec_problem_range_squatters_force_out
		set_character_flag = range_squatter_force_out
	}
}

long_character_event = {#resolved
	id = orfelection.20
	desc = {
		trigger = { has_character_flag = orfelect_good_19}
		text = EVTDESC_orfelec_problem_range_squatters_good
		picture = GFX_evt_culture_change
	}
	desc = {
		trigger = { has_character_flag = orfelect_neutral_19}
		text = EVTDESC_orfelec_problem_range_squatters_neutral
		picture = GFX_evt_noble_haughty_talking_to_peasants
	}
	desc = {
		trigger = { has_character_flag = orfelect_bad_19}
		text = EVTDESC_orfelec_problem_range_squatters_bad
		picture = GFX_evt_burning_house
	}
	portrait = none
	only_playable = yes
	capable_only = yes
	is_triggered_only = yes
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		random_list = {
			40 = {
				mult_modifier = {
					factor = 0.25
					has_character_flag = destitute_ranger_encourage_them
				}
				set_character_flag = orfelect_good_19
			}
			20 = {
				mult_modifier = {
					factor = 0.5
					has_character_flag = destitute_ranger_encourage_them
				}
				set_character_flag = orfelect_neutral_19
			}
			30 = {
				mult_modifier = {
					factor = 0.85
					has_character_flag = destitute_ranger_organize_help
				}
				set_character_flag = orfelect_bad_19
			}
		}
	}
	
	option = {
		trigger = { has_character_flag = orfelect_good_19}
		name = EVTOPT_orfelec_resolve_destitute_ranger_good
		clr_character_flag = range_squatter_force_out
		clr_character_flag = range_squatter_convince
		clr_character_flag = range_squatter_charity
	}
	option = {
		trigger = { has_character_flag = orfelect_neutral_19}
		name = EVTOPT_orfelec_resolve_destitute_ranger_neutral
		clr_character_flag = range_squatter_force_out
		clr_character_flag = range_squatter_convince
		clr_character_flag = range_squatter_charity
	}
	option = {
		trigger = { 
			has_character_flag = orfelect_bad_19
		}
		name = EVTOPT_orfelec_resolve_destitute_ranger_bad
		clr_character_flag = range_squatter_force_out
		clr_character_flag = range_squatter_convince
		clr_character_flag = range_squatter_charity
	}
}

#TODO AI_will_do, and connect it to the rest of the chain
character_event = {
	id = orfelection.21
	desc = EVTDESC_orfelec_problem_range_ambush
	#picture = something
	is_triggered_only = yes#i..think? maybe we will do a tombola, maybe we will have a MTTH on election events
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		long_character_event = {id = orfelection.22 days = 7}	
	}
	option = {
		name = EVTOPTA_orfelec_problem_range_ambush_fight
		set_character_flag = range_ambush_fight
	}
	option = {
		name = EVTOPTA_orfelec_problem_range_ambush_hide
		set_character_flag = range_ambush_hide
		prestige = -100
	}
	option = {
		name = EVTOPTA_orfelec_problem_range_ambush_organize
		set_character_flag = range_ambush_organize
		prestige = -100
	}
}

character_event ={#resolved
	id = orfelection.22
	desc = {
		trigger = { has_character_flag = orfelect_good_21}
		text = EVTDESC_orfelec_problem_range_ambush_good
	}
	desc = {
		trigger = { has_character_flag = orfelect_neutral_21}
		text = EVTDESC_orfelec_problem_range_ambush_neutral
	}
	desc = {
		trigger = { has_character_flag = orfelect_bad_21}
		text = EVTDESC_orfelec_problem_range_ambush_cowardice
	}
	desc = {
		trigger = { has_character_flag = orfelect_bad_21}
		text = EVTDESC_orfelec_problem_range_ambush_death
	}
	#picture = something
	only_playable = yes
	capable_only = yes
	is_triggered_only = yes
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	immediate = {
		random_list = {
			50 = {
				mult_modifier = {
					NOT = { has_character_flag = range_ambush_fight }
					factor = 0
				}
				modifier = {
					trait = strong
					factor = 3
				}
				modifier = {
					trait = robust
					factor = 2
				}
				modifier = {
					trait = duelist
					factor = 2
				}
				modifier = {
					combat_rating = 5
					factor = 1.25
				}
				modifier = {
					combat_rating = 10
					factor = 1.5
				}
				modifier = {
					combat_rating = 15
					factor = 2
				}
				modifier = {
					trait = weak
					factor = 0.25
				}
				modifier = {
					trait = feeble
					factor = 0.5
				}
				modifier = {
					trait = craven
					factor = 0.5
				}
				set_character_flag = orfelec_great_21 #Ending event
			}
			50 = {
				mult_modifier = {
					NOT = { has_character_flag = range_ambush_organize }
					factor = 0
				}
				modifier = {
					trait = brave
					factor = 2
				}
				modifier = {
					martial = 5
					factor = 0.75
				}
				modifier = {
					martial = 10
					factor = 1.25
				}
				modifier = {
					martial = 15
					factor = 1.75
				}
				modifier = {
					trait = robust
					factor = 1.5
				}
				modifier = {
					trait = strategist
					factor = 1.5
				}
				set_character_flag = orfelect_good_21 #Ending event
			}
			20 = {
				mult_modifier = {
					has_character_flag = range_ambush_hide
					factor = 0
				}
				modifier = {
					trait = weak
					factor = 3
				}
				modifier = {
					trait = feeble
					factor = 2
				}
				modifier = {
					trait = craven
					factor = 2
				}
				modifier = {
					combat_rating = 5
					factor = 0.75
				}
				modifier = {
					combat_rating = 10
					factor = 0.5
				}
				modifier = {
					combat_rating = 15
					factor = 0.25
				}
				modifier = {
					trait = strong
					factor = 0.25
				}
				modifier = {
					trait = robust
					factor = 0.5
				}
				modifier = {
					trait = duelist
					factor = 0.5
				}
				set_character_flag = range_ambush_death #Ending event
			}
			50 = {
				modifier = {
					trait = weak
					factor = 3
				}
				modifier = {
					trait = feeble
					factor = 2
				}
				modifier = {
					trait = craven
					factor = 2
				}
				modifier = {
					martial = 5
					factor = 0.75
				}
				modifier = {
					martial = 10
					factor = 0.5
				}
				modifier = {
					martial = 15
					factor = 0.25
				}
				modifier = {
					trait = strong
					factor = 0.25
				}
				modifier = {
					trait = robust
					factor = 0.5
				}
				modifier = {
					trait = duelist
					factor = 0.5
				}
				set_character_flag = orfelect_bad_21 #Ending event
			}
		}
	}
	
	option = {
		trigger = { has_character_flag = orfelec_great_21}
		name = EVTOPT_orfelec_resolve_range_ambush_fight
		clr_character_flag = range_ambush_fight
		clr_character_flag = range_ambush_hide
		clr_character_flag = range_ambush_organize
	}
	option = {
		trigger = { has_character_flag = orfelect_good_21 }
		name = EVTOPT_orfelec_resolve_range_ambush_organized
		clr_character_flag = range_ambush_fight
		clr_character_flag = range_ambush_hide
		clr_character_flag = range_ambush_organize
	}
	
	option = {
		trigger = { has_character_flag = range_ambush_death}
		name = EVTOPT_orfelec_resolve_range_ambush_death
		clr_character_flag = range_ambush_fight
		clr_character_flag = range_ambush_hide
		clr_character_flag = range_ambush_organize
	}
	option = {
		trigger = { has_character_flag = orfelect_bad_21 }
		name = EVTOPT_orfelec_resolve_range_ambush_defeat
		clr_character_flag = range_ambush_fight
		clr_character_flag = range_ambush_hide
		clr_character_flag = range_ambush_organize
	}
}

#Liege Endorsement
character_event = {
	id = orfelection.23
	desc = EVTDESC_orfelection_23
	picture = GFX_evt_emissary
	is_triggered_only = yes
	trigger = { #Insurance against edge cases
		FROM = {
			has_character_flag = orf_election_running
		}
	}
	
	option = {
		name = EVTOPA_orfelection_23
		custom_tooltip = { text = EVTOPA_orfelection_23_TT }
		FROM = {
			hidden_tooltip = {
				set_character_flag = endorsed_by_liege
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0
				OR = {
					AND = {
						FROM = {
							has_character_flag = orf_election_opponent_attacker
						}
						likes_better_than = {
							who = event_target:orf_election_opponent_defender
							than = event_target:orf_election_opponent_attacker
						}
					}
					AND = {
						FROM = {
							has_character_flag = orf_election_opponent_defender
						}
						likes_better_than = {
							who = event_target:orf_election_opponent_attacker
							than = event_target:orf_election_opponent_defender
						}
					}
				}
			}
		}
	}
	
	option = {#don't endorse
		name = EVTOPB_orfelection_23
		custom_tooltip = { text = EVTOPB_orfelection_23_TT }
		ai_chance = {
			factor = 60
		}
	}
	after = {
		FROM = {character_event = {id = orfelection.24}}
	}
}

character_event = {
	id = orfelection.24
	is_triggered_only = yes
	trigger = { #Insurance against edge cases
		has_character_flag = orf_election_running
	}
	
	desc ={
		trigger = { has_character_flag = endorsed_by_liege}
		text = EVTDESC_orfelection_24_endorsed
	}
	desc = {
		trigger = {NOT = { has_character_flag = endorsed_by_liege}}
		text = EVTDESC_orfelection_24_failed
	}
	picture = GFX_evt_emissary
	option = {
		trigger = { has_character_flag = endorsed_by_liege}
		name = EVTOPTA_orfelection_24_endorsed
		opinion = {
			modifier = opinion_grateful
			who = FROM
			years = 10
		}
	}
	option = {
		trigger = {NOT = { has_character_flag = endorsed_by_liege}}
		name = EVTOPTA_orfelection_24_failed
		opinion = {
			modifier = opinion_insulted
			who = FROM
			years = 10
		}
	}
}
	

##A TEMPLATE FOR ELECTION EVENTS

# character_event ={#a problem occurs
	# desc = EVTDESC_orfelec_problem_example
	
	# only_playable = yes
	# capable_only = yes
	# is_triggered_only = yes#i..think? maybe we will do a tombola, maybe we will have a MTTH on election events
	
	
	# immediate = {
		# narrative_Event = {id = orfelection.nextnumber days = 7}
	# }
	# option = {#skill one
		# name = EVTOPTA_orfelec_problem_example
		# custom_tooltip = {
			# text = ORFELECCUSTOM
			# random_list = {
				# 10 = {#good
					# set_character_flag = orfelect_good
				# }
				# 20 = {#neutral
					# set_character_flag = orfelect_neutral
				# }
				# 10 = {#bad
					# set_character_flag = orfelect_bad
				# }
			#}
		# }
	# }
	# option = {
		# name = EVTOPTB_orfelec_problem_example
		# custom_tooltip = {
			# text = ORFELECCUSTOM
			# random_list = {
				# 10 = {#good
					# set_character_flag = orfelect_good
				# }
				# 20 = {#neutral
					# set_character_flag = orfelect_neutral
				# }
				# 10 = {#bad
					# set_character_flag = orfelect_bad
				# }
			#}
		# }
	# }
	# option = {
		# name = EVTOPTC_orfelec_problem_example
		# custom_tooltip = {
			# text = ORFELECCUSTOM
			# random_list = {
				# 10 = {#good
					# set_character_flag = orfelect_good
				# }
				# 20 = {#neutral
					# set_character_flag = orfelect_neutral
				# }
				# 10 = {#bad
					# set_character_flag = orfelect_bad
				# }
			#}
		# }
	# }
# }


# character_event ={#resolved
	# desc = {
		# trigger = { has_character_flag = orfelect_good}
		# text =EVTDESC_orfelec_resolve_good_example
	# }
	# desc = {
		# trigger = { has_character_flag = orfelect_good}
		# text =EVTDESC_orfelec_resolve_neutral_example
	# }
	# desc = {
		# trigger = { has_character_flag = orfelect_good}
		# text =EVTDESC_orfelec_resolve_bad_example
	# }
	# only_playable = yes
	# capable_only = yes
	# is_triggered_only = yes
	# option = {
		# name = EVTOPT_orfelec_resolve_good_example
		# trigger = { has_character_flag = orfelect_good}
		# clr_character_flag = orfelect_good
	# }
	# option = {
		# trigger = { has_character_flag = orfelect_neutral}
		# name = EVTOPT_orfelec_resolve_neutral_example
		# clr_character_flag = orfelect_neutral
	# }
	# option = {
		# name = EVTOPT_orfelec_resolve_bad_example
		# trigger = { has_character_flag = orfelect_bad}
		# clr_character_flag = orfelect_bad
	# }
# }